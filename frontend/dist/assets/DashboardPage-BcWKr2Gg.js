import{r as e,j as s}from"./vendor-react-DUoQhEpM.js";import{u as t}from"./useAgents-B1G2yQRq.js";import{u as a,T as l}from"./TaskCard-DGMyFbGe.js";import{c as r,L as i}from"./index-BT5BEwDb.js";import{A as n,e as o,d as c,f as d,C as g,c as m,g as x,b as u,T as p}from"./vendor-icons-KwL3JnsX.js";import{f as b}from"./vendor-date-B0vwdYvA.js";import"./vendor-router-Cg48UhP-.js";import"./vendor-query-CC2jgEBg.js";import"./vendor-http-B5K7MVzt.js";import"./vendor-B7sF_03a.js";const h={agent_created:{icon:m,color:"text-green-600",bgColor:"bg-green-100"},agent_updated:{icon:m,color:"text-blue-600",bgColor:"bg-blue-100"},agent_status_changed:{icon:n,color:"text-purple-600",bgColor:"bg-purple-100"},task_created:{icon:g,color:"text-orange-600",bgColor:"bg-orange-100"},task_assigned:{icon:g,color:"text-blue-600",bgColor:"bg-blue-100"},task_completed:{icon:d,color:"text-green-600",bgColor:"bg-green-100"},task_failed:{icon:o,color:"text-red-600",bgColor:"bg-red-100"},message_received:{icon:c,color:"text-indigo-600",bgColor:"bg-indigo-100"},system_alert:{icon:o,color:"text-yellow-600",bgColor:"bg-yellow-100"}},j=e.memo(function({activity:t,onClick:a}){const l=h[t.type],i=l.icon,n=e.useMemo(()=>{try{return b(new Date(t.timestamp),{addSuffix:!0})}catch{return"unknown time"}},[t.timestamp]);return s.jsxs("div",{onClick:()=>null==a?void 0:a(t),className:r("flex items-start gap-3 p-3 rounded-lg transition-colors",a&&"cursor-pointer hover:bg-gray-50","border-b border-gray-100 last:border-0"),children:[s.jsx("div",{className:r("p-2 rounded-lg shrink-0",l.bgColor),children:s.jsx(i,{className:r("h-4 w-4",l.color)})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("h4",{className:"text-sm font-medium text-gray-900 truncate",children:t.title}),t.description&&s.jsx("p",{className:"text-sm text-gray-500 mt-0.5 line-clamp-2",children:t.description}),s.jsxs("div",{className:"flex items-center gap-1 mt-1 text-xs text-gray-600",children:[s.jsx(x,{className:"h-3 w-3"}),s.jsx("span",{children:n})]})]})]})});j.displayName="ActivityItem";const v=e.memo(function({activities:t,onItemClick:a,maxItems:l=50}){const r=e.useMemo(()=>t.slice(0,l),[t,l]);return 0===t.length?s.jsxs("div",{className:"p-8 text-center text-gray-600",children:[s.jsx(n,{className:"mx-auto mb-2 h-8 w-8"}),s.jsx("p",{children:"No recent activity"})]}):s.jsxs("div",{className:"divide-y divide-gray-100",children:[r.map(e=>s.jsx(j,{activity:e,onClick:a},e.id)),t.length>l&&s.jsxs("div",{className:"p-3 text-center text-sm text-gray-600",children:["+",t.length-l," more activities"]})]})});function f(){const{data:r,isLoading:o}=t(),{data:c,isLoading:d}=a(),x=e.useMemo(()=>{if(!r||!c)return null;const e=r.filter(e=>"ready"===e.status||"busy"===e.status).length,s=c.filter(e=>"pending"===e.status).length,t=c.filter(e=>"running"===e.status).length,a=c.filter(e=>"completed"===e.status).length;return{totalAgents:r.length,activeAgents:e,pendingTasks:s,runningTasks:t,completedTasks:a,totalTasks:c.length}},[r,c]),b=e.useMemo(()=>r&&c?function(e,s){const t=[];return null==e||e.forEach(e=>{t.push({id:`agent-${e.id}`,type:"agent_status_changed",title:`Agent ${e.name} is ${e.status}`,description:`Type: ${e.agent_type}, Capabilities: ${e.capabilities.join(", ")}`,timestamp:e.last_heartbeat||e.created_at,metadata:e})}),null==s||s.slice(0,10).forEach(e=>{t.push({id:`task-${e.id}`,type:"completed"===e.status?"task_completed":"failed"===e.status?"task_failed":"assigned"===e.status?"task_assigned":"task_created",title:`Task: ${e.title}`,description:e.description||`Priority: ${e.priority}`,timestamp:e.updated_at,metadata:e})}),t.sort((e,s)=>new Date(s.timestamp).getTime()-new Date(e.timestamp).getTime())}(r,c):[],[r,c]),h=e.useMemo(()=>c?c.slice(0,4):[],[c]);return o||d?s.jsx("div",{className:"p-8",children:s.jsx(i,{size:"lg",text:"Loading dashboard..."})}):s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsx("div",{className:"flex items-center justify-between",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:s.jsx(u,{className:"h-6 w-6 text-blue-600"})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Dashboard"}),s.jsx("p",{className:"text-gray-500",children:"Overview of your agent fleet and tasks"})]})]})}),x&&s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[s.jsx(N,{icon:m,label:"Active Agents",value:x.activeAgents,total:x.totalAgents,color:"blue"}),s.jsx(N,{icon:g,label:"Pending Tasks",value:x.pendingTasks,total:x.totalTasks,color:"orange"}),s.jsx(N,{icon:n,label:"Running Tasks",value:x.runningTasks,total:x.totalTasks,color:"purple"}),s.jsx(N,{icon:p,label:"Completed",value:x.completedTasks,total:x.totalTasks,color:"green"})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[s.jsx("div",{className:"lg:col-span-1",children:s.jsxs("div",{className:"bg-white rounded-lg border shadow-sm",children:[s.jsx("div",{className:"p-4 border-b",children:s.jsxs("h2",{className:"font-semibold flex items-center gap-2",children:[s.jsx(n,{className:"h-4 w-4"}),"Recent Activity"]})}),s.jsx(v,{activities:b,maxItems:20})]})}),s.jsx("div",{className:"lg:col-span-2",children:s.jsxs("div",{className:"bg-white rounded-lg border shadow-sm",children:[s.jsx("div",{className:"p-4 border-b flex items-center justify-between",children:s.jsxs("h2",{className:"font-semibold flex items-center gap-2",children:[s.jsx(g,{className:"h-4 w-4"}),"Recent Tasks"]})}),s.jsx("div",{className:"p-4",children:s.jsx(l,{tasks:h,columns:2})})]})})]})]})}function N({icon:e,label:t,value:a,total:l,color:r}){const i={blue:{bg:"bg-blue-100",text:"text-blue-600",bar:"bg-blue-500"},green:{bg:"bg-green-100",text:"text-green-600",bar:"bg-green-500"},orange:{bg:"bg-orange-100",text:"text-orange-600",bar:"bg-orange-500"},purple:{bg:"bg-purple-100",text:"text-purple-600",bar:"bg-purple-500"},red:{bg:"bg-red-100",text:"text-red-600",bar:"bg-red-500"}}[r],n=l>0?Math.round(a/l*100):0;return s.jsxs("div",{className:"bg-white p-4 rounded-lg border shadow-sm",children:[s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsx("div",{className:y("p-2 rounded-lg",i.bg),children:s.jsx(e,{className:y("h-5 w-5",i.text)})}),s.jsx("span",{className:"text-2xl font-bold",children:a})]}),s.jsx("p",{className:"text-sm text-gray-500 mt-2",children:t}),s.jsx("div",{className:"mt-3 h-1.5 bg-gray-100 rounded-full overflow-hidden",children:s.jsx("div",{className:y("h-full rounded-full transition-all",i.bar),style:{width:`${n}%`}})}),s.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:[n,"% of ",l]})]})}function y(...e){return e.filter(Boolean).join(" ")}v.displayName="ActivityList";export{f as default};
