import{u as e,r as s,j as a,L as r}from"./vendor-react-DUoQhEpM.js";import{u as l,L as t,d as o}from"./index-DqyBRKho.js";import{c as n,n as d,o as i}from"./vendor-icons-KwL3JnsX.js";import"./vendor-router-Cg48UhP-.js";import"./vendor-query-CC2jgEBg.js";import"./vendor-http-B5K7MVzt.js";import"./vendor-B7sF_03a.js";function u(){const u=e(),{isAuthenticated:c}=l();if(c)return u("/"),null;const[m,x]=s.useState({username:"",email:"",full_name:"",password:"",confirmPassword:""}),[b,h]=s.useState(!1),[f,p]=s.useState(!1),[g,j]=s.useState(null),[w,y]=s.useState(!1);return w?a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 px-4",children:a.jsxs("div",{className:"max-w-md w-full bg-white rounded-lg shadow-lg p-8 text-center",children:[a.jsx("div",{className:"p-3 bg-green-100 rounded-full mb-4 inline-block",children:a.jsx(n,{className:"h-8 w-8 text-green-600"})}),a.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Success!"}),a.jsx("p",{className:"text-gray-600",children:"Your account has been created. Redirecting to login..."})]})}):a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 px-4",children:a.jsxs("div",{className:"max-w-md w-full bg-white rounded-lg shadow-lg p-8",children:[a.jsxs("div",{className:"flex flex-col items-center mb-8",children:[a.jsx("div",{className:"p-3 bg-blue-100 rounded-full mb-4",children:a.jsx(n,{className:"h-8 w-8 text-blue-600"})}),a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Mission Control"}),a.jsx("p",{className:"text-gray-500 mt-1",children:"Create your account"})]}),a.jsxs("form",{onSubmit:async e=>{var s,a;if(e.preventDefault(),j(null),m.password===m.confirmPassword)if(m.password.length<8)j("Password must be at least 8 characters");else{p(!0);try{await o.post("/auth/register",{username:m.username,email:m.email,full_name:m.full_name,password:m.password}),y(!0),setTimeout(()=>{u("/login")},2e3)}catch(r){j((null==(a=null==(s=r.response)?void 0:s.data)?void 0:a.detail)||"Registration failed. Username or email may already exist.")}finally{p(!1)}}else j("Passwords do not match")},className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"username",className:"block text-sm font-medium text-gray-700 mb-1",children:"Username"}),a.jsx("input",{id:"username",type:"text",value:m.username,onChange:e=>x({...m,username:e.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Choose a username",required:!0,disabled:f})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),a.jsx("input",{id:"email",type:"email",value:m.email,onChange:e=>x({...m,email:e.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"your@email.com",required:!0,disabled:f})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"full_name",className:"block text-sm font-medium text-gray-700 mb-1",children:"Full Name"}),a.jsx("input",{id:"full_name",type:"text",value:m.full_name,onChange:e=>x({...m,full_name:e.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Your full name",required:!0,disabled:f})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{id:"password",type:b?"text":"password",value:m.password,onChange:e=>x({...m,password:e.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 pr-10",placeholder:"Min 8 characters",required:!0,minLength:8,disabled:f}),a.jsx("button",{type:"button",onClick:()=>h(!b),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-600 hover:text-gray-800 focus:outline-none focus:ring-2 focus:ring-blue-500 rounded","aria-label":b?"Hide password":"Show password",children:b?a.jsx(d,{className:"h-4 w-4","aria-hidden":"true"}):a.jsx(i,{className:"h-4 w-4","aria-hidden":"true"})})]})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700 mb-1",children:"Confirm Password"}),a.jsx("input",{id:"confirmPassword",type:"password",value:m.confirmPassword,onChange:e=>x({...m,confirmPassword:e.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Confirm your password",required:!0,disabled:f})]}),g&&a.jsx("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg text-sm text-red-700",children:g}),a.jsx("button",{type:"submit",disabled:f||!m.username||!m.email||!m.password,className:"w-full flex items-center justify-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:f?a.jsx(t,{size:"sm"}):"Create Account"})]}),a.jsx("div",{className:"mt-6 text-center",children:a.jsxs("p",{className:"text-sm text-gray-600",children:["Already have an account?"," ",a.jsx(r,{to:"/login",className:"text-blue-600 hover:text-blue-700 font-medium",children:"Sign in here"})]})})]})})}export{u as default};
