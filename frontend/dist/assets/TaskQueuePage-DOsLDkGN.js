import{r as e,j as l}from"./vendor-react-DUoQhEpM.js";import{u as a,a as s,T as t}from"./TaskCard-DwowFpyy.js";import{L as r,c as o}from"./index-BHRd6Cq1.js";import{C as n,P as i,g as c,j as d,f as u,l as g,i as x,S as m,F as p}from"./vendor-icons-KwL3JnsX.js";import"./vendor-router-Cg48UhP-.js";import"./vendor-query-CC2jgEBg.js";import"./vendor-date-B0vwdYvA.js";import"./vendor-http-B5K7MVzt.js";import"./vendor-B7sF_03a.js";const v=[{value:"",label:"All Tasks",icon:n,color:"gray"},{value:"pending",label:"Pending",icon:c,color:"gray"},{value:"assigned",label:"Assigned",icon:d,color:"blue"},{value:"running",label:"Running",icon:d,color:"purple"},{value:"completed",label:"Completed",icon:u,color:"green"},{value:"failed",label:"Failed",icon:g,color:"red"},{value:"cancelled",label:"Cancelled",icon:x,color:"gray"}],b=[{value:"",label:"All Priorities"},{value:"critical",label:"Critical"},{value:"high",label:"High"},{value:"medium",label:"Medium"},{value:"low",label:"Low"}];function h(){const{data:c,isLoading:d}=a(),u=s(),[g,x]=e.useState(""),[h,f]=e.useState(""),[y,N]=e.useState(""),[w,C]=e.useState(null),k=e.useMemo(()=>c?c.filter(e=>{var l;const a=e.title.toLowerCase().includes(g.toLowerCase())||(null==(l=e.description)?void 0:l.toLowerCase().includes(g.toLowerCase())),s=!h||e.status===h,t=!y||e.priority===y;return a&&s&&t}):[],[c,g,h,y]),T=e.useMemo(()=>c?{total:c.length,pending:c.filter(e=>"pending"===e.status).length,running:c.filter(e=>"running"===e.status).length,completed:c.filter(e=>"completed"===e.status).length,failed:c.filter(e=>"failed"===e.status).length}:null,[c]),L=e.useCallback(e=>{C(e)},[]),S=e.useCallback(e=>{confirm(`Are you sure you want to cancel task "${e.title}"?`)&&u.mutate(e.id)},[u]);return d?l.jsx("div",{className:"p-8",children:l.jsx(r,{size:"lg",text:"Loading tasks..."})}):l.jsxs("div",{className:"p-6 space-y-6",children:[l.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"p-2 bg-orange-100 rounded-lg",children:l.jsx(n,{className:"h-6 w-6 text-orange-600"})}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Task Queue"}),l.jsx("p",{className:"text-gray-500",children:"Manage and monitor tasks"})]})]}),l.jsxs("button",{onClick:()=>alert("Create task modal - to be implemented"),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[l.jsx(i,{className:"h-4 w-4"}),"Create Task"]})]}),T&&l.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:[l.jsx(j,{label:"Total",value:T.total,color:"gray"}),l.jsx(j,{label:"Pending",value:T.pending,color:"yellow"}),l.jsx(j,{label:"Running",value:T.running,color:"purple"}),l.jsx(j,{label:"Completed",value:T.completed,color:"green"}),l.jsx(j,{label:"Failed",value:T.failed,color:"red"})]}),l.jsx("div",{className:"flex flex-wrap gap-2",children:v.map(e=>{const a=e.icon,s=h===e.value;return l.jsxs("button",{onClick:()=>f(e.value),className:o("flex items-center gap-1.5 px-3 py-1.5 rounded-full text-sm font-medium transition-colors",s?`bg-${e.color}-100 text-${e.color}-700 ring-2 ring-${e.color}-500`:"bg-gray-100 text-gray-600 hover:bg-gray-200"),children:[l.jsx(a,{className:"h-3.5 w-3.5"}),e.label]},e.value)})}),l.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[l.jsxs("div",{className:"relative flex-1",children:[l.jsx(m,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-600","aria-hidden":"true"}),l.jsx("input",{type:"text",placeholder:"Search tasks...",value:g,onChange:e=>x(e.target.value),className:"w-full pl-10 pr-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),l.jsxs("div",{className:"relative",children:[l.jsx(p,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-600","aria-hidden":"true"}),l.jsx("select",{value:y,onChange:e=>N(e.target.value),className:"pl-10 pr-8 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 appearance-none bg-white min-w-[150px]",children:b.map(e=>l.jsx("option",{value:e.value,children:e.label},e.value))})]})]}),l.jsx(t,{tasks:k,onTaskClick:L,onTaskCancel:S,selectedTaskId:null==w?void 0:w.id}),0===k.length&&l.jsxs("div",{className:"p-8 text-center text-gray-600",children:[l.jsx(n,{className:"mx-auto mb-2 h-12 w-12","aria-hidden":"true"}),l.jsx("p",{className:"text-lg",children:"No tasks found"}),l.jsx("p",{className:"text-sm",children:"Create a new task or adjust your filters"})]})]})}function j({label:e,value:a,color:s}){return l.jsxs("div",{className:o("px-4 py-3 rounded-lg text-center",{gray:"bg-gray-100 text-gray-600",yellow:"bg-yellow-100 text-yellow-600",purple:"bg-purple-100 text-purple-600",green:"bg-green-100 text-green-600",red:"bg-red-100 text-red-600"}[s]),children:[l.jsx("div",{className:"text-2xl font-bold",children:a}),l.jsx("div",{className:"text-xs opacity-75",children:e})]})}export{h as default};
